# Управляющие конструкции

## Введение

Управляющие конструкции позволяют создавать сложную логику в bash-скриптах. В этом уроке мы рассмотрим основные конструкции управления потоком выполнения.

## Конструкция if-then

### Базовый синтаксис

```bash
if [ условие ]; then
    команды
fi
```

### Примеры использования

```bash
# Проверка существования файла
if [ -f "file.txt" ]; then
    echo "Файл существует"
fi

# Проверка значения переменной
if [ "$name" = "Иван" ]; then
    echo "Привет, Иван!"
fi

# Проверка числового значения
if [ $age -ge 18 ]; then
    echo "Вы совершеннолетний"
fi
```

## Конструкция if-then-else

### Базовый синтаксис

```bash
if [ условие ]; then
    команды_1
else
    команды_2
fi
```

### Примеры использования

```bash
# Проверка доступа к файлу
if [ -r "file.txt" ]; then
    echo "Файл доступен для чтения"
else
    echo "Файл недоступен для чтения"
fi

# Проверка возраста
if [ $age -ge 18 ]; then
    echo "Вы совершеннолетний"
else
    echo "Вы несовершеннолетний"
fi
```

## Конструкция if-then-elif-else

### Базовый синтаксис

```bash
if [ условие1 ]; then
    команды_1
elif [ условие2 ]; then
    команды_2
else
    команды_3
fi
```

### Примеры использования

```bash
# Оценка по баллам
if [ $score -ge 90 ]; then
    echo "Отлично"
elif [ $score -ge 80 ]; then
    echo "Хорошо"
elif [ $score -ge 70 ]; then
    echo "Удовлетворительно"
else
    echo "Неудовлетворительно"
fi
```

## Практическое задание

Создайте скрипт `control_structures_demo.sh`:

```bash
#!/bin/bash

# Проверка аргументов командной строки
if [ $# -eq 0 ]; then
    echo "Использование: $0 <имя_файла>"
    exit 1
fi

# Проверка существования файла
if [ ! -f "$1" ]; then
    echo "Ошибка: файл '$1' не существует"
    exit 1
fi

# Проверка прав доступа
if [ -r "$1" ]; then
    echo "Файл доступен для чтения"
    if [ -w "$1" ]; then
        echo "Файл доступен для записи"
    else
        echo "Файл недоступен для записи"
    fi
else
    echo "Файл недоступен для чтения"
fi

# Проверка размера файла
file_size=$(stat -f%z "$1")
if [ $file_size -gt 1000 ]; then
    echo "Файл большой (>1KB)"
elif [ $file_size -gt 100 ]; then
    echo "Файл средний (>100B)"
else
    echo "Файл маленький (<=100B)"
fi
```

## Важные моменты

- Всегда используйте пробелы вокруг условий в квадратных скобках
- Используйте кавычки при сравнении строк
- Проверяйте наличие аргументов командной строки
- Используйте `exit` для завершения скрипта при ошибках
- Следите за отступами для лучшей читаемости

## Дополнительные материалы

- [Conditional Constructs](https://www.gnu.org/software/bash/manual/bash.html#Conditional-Constructs)
- [Bash If Statements](https://ryanstutorials.net/bash-scripting-tutorial/bash-if-statements.php)

## Вопросы для самопроверки

1. Как проверить существование файла?
2. В чем разница между `if-then` и `if-then-else`?
3. Как правильно использовать `elif`?
4. Почему важно проверять аргументы командной строки? 