# Проверки файлов

## Введение

В bash есть множество операторов для проверки файлов и директорий. В этом уроке мы рассмотрим основные проверки и их использование.

## Основные проверки файлов

### Проверки существования и типа

```bash
# Файл существует
if [ -e "file.txt" ]; then
    echo "Файл существует"
fi

# Файл существует и является обычным файлом
if [ -f "file.txt" ]; then
    echo "Это обычный файл"
fi

# Директория существует
if [ -d "directory" ]; then
    echo "Это директория"
fi

# Символическая ссылка существует
if [ -L "link" ]; then
    echo "Это символическая ссылка"
fi
```

### Проверки прав доступа

```bash
# Файл доступен для чтения
if [ -r "file.txt" ]; then
    echo "Файл доступен для чтения"
fi

# Файл доступен для записи
if [ -w "file.txt" ]; then
    echo "Файл доступен для записи"
fi

# Файл исполняемый
if [ -x "script.sh" ]; then
    echo "Файл исполняемый"
fi
```

### Проверки размера и времени

```bash
# Файл не пустой
if [ -s "file.txt" ]; then
    echo "Файл не пустой"
fi

# Файл новее другого файла
if [ "file1.txt" -nt "file2.txt" ]; then
    echo "file1.txt новее file2.txt"
fi

# Файл старше другого файла
if [ "file1.txt" -ot "file2.txt" ]; then
    echo "file1.txt старше file2.txt"
fi
```

## Практическое задание

Создайте скрипт `file_checks_demo.sh`:

```bash
#!/bin/bash

# Проверка аргументов
if [ $# -eq 0 ]; then
    echo "Использование: $0 <путь_к_файлу>"
    exit 1
fi

file="$1"

# Проверка существования
if [ ! -e "$file" ]; then
    echo "Ошибка: файл '$file' не существует"
    exit 1
fi

# Проверка типа
echo "=== Информация о файле ==="
if [ -f "$file" ]; then
    echo "Тип: обычный файл"
elif [ -d "$file" ]; then
    echo "Тип: директория"
elif [ -L "$file" ]; then
    echo "Тип: символическая ссылка"
fi

# Проверка прав доступа
echo -e "\n=== Права доступа ==="
if [ -r "$file" ]; then
    echo "Доступен для чтения"
else
    echo "Недоступен для чтения"
fi

if [ -w "$file" ]; then
    echo "Доступен для записи"
else
    echo "Недоступен для записи"
fi

if [ -x "$file" ]; then
    echo "Исполняемый"
else
    echo "Не исполняемый"
fi

# Проверка размера
echo -e "\n=== Размер ==="
if [ -s "$file" ]; then
    size=$(stat -f%z "$file")
    echo "Размер: $size байт"
else
    echo "Файл пустой"
fi

# Проверка времени модификации
echo -e "\n=== Время модификации ==="
mod_time=$(stat -f%Sm "$file")
echo "Последняя модификация: $mod_time"
```

## Важные моменты

- Всегда проверяйте существование файла перед другими проверками
- Используйте кавычки при работе с именами файлов
- Проверяйте права доступа перед операциями с файлами
- Учитывайте регистр в именах файлов
- Используйте абсолютные пути для надежности

## Дополнительные материалы

- [File Test Operators](https://www.gnu.org/software/bash/manual/bash.html#Bash-Conditional-Expressions)
- [Bash File Testing](https://tldp.org/LDP/abs/html/fto.html)

## Вопросы для самопроверки

1. Как проверить, является ли файл директорией?
2. В чем разница между `-e` и `-f`?
3. Как проверить права доступа к файлу?
4. Как получить размер файла в байтах? 